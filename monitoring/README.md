# Домашнее задание к занятию 13 «Введение в мониторинг» <br>

## Обязательные задания <br>

**1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя платформу для вычислений с выдачей текстовых отчётов,** <br>
**которые сохраняются на диск. Взаимодействие с платформой осуществляется по протоколу http.** <br>
**Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы выведите в мониторинг и почему?** <br>

Минимальный набор метрик на указанный проект: <br>
1.1 - Мониторинг количества ответов по http. <br>
	  мониторинг ответов с кодом 200 <br>
	  мониторинг ответов с кодом 500 <br>
	  В идеальном сценарии алертинг на данный мониторинг должен навешиваться опираясь на результаты Нагрузочного тестирования. <br>
	
1.2 - Мониторинг инфраструктуры: <br>
      Загрузка CPU - Алерты: Warning при значении загрузки CPU = 85% в течениии 5 минут, Critical при значении загрузки CPU = 95% в течениии 5 минут. <br>
	  Загрузка RAM/swap - Алерты: Warning при значении загрузки CPU = 75% в течениии 5 минут, Critical при значении загрузки CPU = 85-90% в течениии 5 минут. <br>
	  Мониторинг свободного места на дисках: системный + цедевой для хранения отчетов. - Алерты: Warning при получении значения об остатке менее 20% свободного места, <br>
	  Critical при получении значения об остатке менее 10% свободного места. <br>
	  Проверка количества свободных inode <br>

**2. Менеджер продукта, посмотрев на ваши метрики, сказал, что ему непонятно, что такое RAM/inodes/CPUla**. <br>
**Также он сказал, что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания.** <br>
**Что вы можете ему предложить?** <br>

2.1 Для упрощения понимания и восприятия метрик необходимо настроить инструмент визкализации, например Grafana. <br>
В ней есть возможность именовать дашборды и визуализацию метрик заведомо понятными значениями. <br>
2.2 Для мониторинга доступности системы использовать готовую или написанную метрику Uptime - отображающую статус системы в режиме real-time и в за указанный промежуток времени. <br>
2.3 Добавить метрики: количество запросов от клиентов - количство успешных отчетов. <br>

**3. Вашей DevOps-команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики, в свою очередь, хотят видеть все ошибки, которые выдают их приложения.** <br>
**Какое решение вы можете предпринять в этой ситуации, чтобы разработчики получали ошибки приложения?** <br>

3.1 Использовать Sentry - облачный менеджер инцидентов приложений. <br>
3.2 Установить и настроить сборщик логов: Graylog, Elastic <br>

**4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA = 99% по http-кодам ответов.** <br>
**Этот параметр вычисляется по формуле: summ_2xx_requests/summ_all_requests. Он не поднимается выше 70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?** <br>

4.1 Не учтены другие типы ответов. (1xx ; 3xx) <br>
(summ_1xx_requests + summ_2xx_requests + summ_3xx_requests)/summ_all_requests <br>

**5. Опишите основные плюсы и минусы pull и push систем мониторинга.** <br>

Push: <br>
упрощение репликации данных в разные системы мониторинга или их резервные копии <br>
более гибкая настройка отправки пакетов данных с метриками <br>
UDP — это менее затратный способ передачи данных, из-за чего может возрасти производительность сбора метрик <br>

Pull: <br>
легче контролировать подлинность данных <br> 
можно настроить единый proxy server до всех агентов с TLS <br>
упрощённая отладка получения данных с агентов <br>

**6. Какие из ниже перечисленных систем относятся к push модели, а какие к pull? А может есть гибридные?** <br>

Prometheus - pull <br>
TICK - push <br>
Zabbix - push+pull=гибридная система <br>
VictoriaMetrics - pull <br>
Nagios - pull <br>

**7. Склонируйте себе репозиторий и запустите TICK-стэк, используя технологии docker и docker-compose.** <br>

**8. Перейдите в веб-интерфейс Chronograf (http://localhost:8888) и откройте вкладку Data explorer.** <br>

**Нажмите на кнопку Add a query** <br>
**Изучите вывод интерфейса и выберите БД telegraf.autogen** <br>
**В measurments выберите cpu->host->telegraf-getting-started, а в fields выберите usage_system. Внизу появится график утилизации cpu.** <br>
**Вверху вы можете увидеть запрос, аналогичный SQL-синтаксису. Поэкспериментируйте с запросом, попробуйте изменить группировку и интервал наблюдений.** <br>
**Для выполнения задания приведите скриншот с отображением метрик утилизации cpu из веб-интерфейса.** <br>

**9. Изучите список telegraf inputs. Добавьте в конфигурацию telegraf следующий плагин - docker:** <br>
